<header>
<nav class="navbar flex p-0 min-h-[5rem]">
    <div class="navbar-start basis-1/3">
        <a routerLink="/">
            <div class="w-24">
                <img class="block md:hidden" src="/assets/site-logo.png" alt="site logo">
            </div>
            <h1 class="hidden md:block dark:text-primary-dark leading-7 text-primary-light">Anime Galaxy</h1>
        </a>
    </div>
    
    <div class="navbar-center basis-1/3">
        <div class="md:hidden dropdown-container justify-center">
            <div class="dropdown">
                <label class="btn btn-solid-primary my-2 text-[2rem]" tabindex="0">â˜°</label>
                <div class="dropdown-menu dropdown-menu-bottom-center">
                    <a class="dropdown-item text-sm text-center" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="dropdown-active" routerLink="/">Home</a>
                    <a class="dropdown-item text-sm text-center" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="dropdown-active" routerLink="/anime">Anime</a>
                    <a class="dropdown-item text-sm text-center" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="dropdown-active" routerLink="/anime/genre">Genres</a>
                    <ng-container *ngIf="!(user$ | async) && !(isLoading$ | async)">
                        <a class="dropdown-item text-sm text-center" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="dropdown-active" routerLink="/user/login">Login</a>
                        <a class="dropdown-item text-sm text-center" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="dropdown-active" routerLink="/user/register">Register</a>
                    </ng-container>
                </div>
            </div>
        </div>
        <div class="nav-wrapper hidden md:navbar-center">
            <a class="navbar-item" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="active" routerLink="/">Home</a>
            <a class="navbar-item" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="active" routerLink="/anime">Anime</a>
            <a class="navbar-item" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="active" routerLink="/anime/genre">Genres</a>
            <ng-container *ngIf="!(user$ | async) && !(isLoading$ | async)">
                <a class="navbar-item" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="active" routerLink="/user/login">Login</a>
                <a class="navbar-item" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="active" routerLink="/user/register">Register</a>
            </ng-container>
        </div>
    </div>
    <div class="navbar-end basis-1/3 justify-end pr-[20px]">
        <ng-container *ngIf="user$ | async as user; else AnonUser">
            <div *ngIf="!(isLoading$ | async)" class="avatar avatar-ring avatar-md">
                <div class="dropdown-container">
                    <div class="dropdown md:dropdown-hover">
                        <label class="btn btn-ghost flex cursor-pointer px-0" tabindex="0">
                            <div class="avatar avatar-md avatar-ring-primary w-12 h-12">
                                <img [src]="user.photoURL ? user.photoURL : '/assets/avatars/avatar-5-onepiece.jpg'" alt="avatar" />
                            </div>
                        </label>
                        <div class="dropdown-menu dropdown-menu-bottom-left">
                            <section >
                                <nav class="menu rounded-md">
                                    <section class="menu-section px-4">
                                        <ul class="menu-items">
                                            <li routerLinkActive="menu-active" class="menu-item">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                    <path d="M6.66998 19.25C7.17536 18.2723 7.93991 17.4525 8.87998 16.8802C9.82005 16.3079 10.8994 16.0052 12 16.0052C13.1006 16.0052 14.1799 16.3079 15.12 16.8802C16.0601 17.4525 16.8246 18.2723 17.33 19.25" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                    <path d="M12 13C13.7784 13 15.22 11.5584 15.22 9.78C15.22 8.00164 13.7784 6.56 12 6.56C10.2216 6.56 8.78003 8.00164 8.78003 9.78C8.78003 11.5584 10.2216 13 12 13Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                 </svg>
                                                <a routerLink="/user/profile" class="dropdown-item text-sm">Profile</a>
                                            </li>
                            
                                            <li routerLinkActive="menu-active" class="menu-item">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M11.6548 16.4742L7.33438 19.9261C7.25547 19.989 7.16095 20.0293 7.06092 20.0426C6.96089 20.0559 6.85912 20.0418 6.76648 20.0018C6.67384 19.9618 6.59383 19.8973 6.53499 19.8153C6.47615 19.7334 6.4407 19.6369 6.43243 19.5363V6.17419C6.43243 5.58354 6.66707 5.01709 7.08471 4.59944C7.50236 4.18179 8.06882 3.94716 8.65946 3.94716H15.3405C15.9312 3.94716 16.4976 4.18179 16.9153 4.59944C17.3329 5.01709 17.5676 5.58354 17.5676 6.17419V19.5363C17.5671 19.6407 17.5373 19.7429 17.4815 19.8311C17.4258 19.9193 17.3464 19.9901 17.2523 20.0354C17.1583 20.0807 17.0534 20.0986 16.9497 20.0872C16.8459 20.0757 16.7475 20.0353 16.6656 19.9706L12.3452 16.5187C12.2541 16.4307 12.1346 16.3778 12.0082 16.3697C11.8817 16.3615 11.7565 16.3986 11.6548 16.4742Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                </svg>
                                                <a routerLink="/anime/list-watched" class="dropdown-item text-sm">Watchlist</a>
                                            </li>
                                            <li routerLinkActive="menu-active" class="menu-item">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M12 7.78032C10.3391 4.01944 6.47526 3.68514 4.67598 5.3253C3.21118 6.64161 2.50762 9.79656 3.84554 12.7008C6.15231 17.6944 12 20.3166 12 20.3166C12 20.3166 17.8477 17.6944 20.1544 12.7008C21.4924 9.79656 20.7888 6.64161 19.324 5.3253C17.5247 3.68514 13.6609 4.01944 12 7.78032Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                </svg>
                                                <a routerLink="/anime/list-liked" class="dropdown-item text-sm">Liked Anime</a>
                                            </li>
                                            <li class="menu-item menu-logout">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M13.2692 19.9464H8.85459C7.74413 19.9977 6.65816 19.6094 5.83188 18.8658C5.0056 18.1221 4.50552 17.0829 4.43994 15.9732V8.02682C4.50552 6.91711 5.0056 5.87789 5.83188 5.13424C6.65816 4.39058 7.74413 4.00236 8.85459 4.05364H13.2692" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                    <path d="M19.5601 12H8.08197" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
                                                    <path d="M15.5097 16.4147L19.2953 12.6291C19.461 12.4617 19.5541 12.2356 19.5541 12C19.5541 11.7644 19.461 11.5383 19.2953 11.3709L15.5097 7.58536" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                </svg>
                                                <a class="dropdown-item text-sm" (click)="onLogout()">Logout</a>
                                            </li>
                                        </ul>
                                    </section>
                                </nav>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
      </ng-container>
	</div>
</nav>
</header>

<ng-template #AnonUser>
<div *ngIf="(isLoading$ | async) || !(user$ | async)" class="avatar avatar-ring avatar-md">
    <img src="/assets/anon-user.png" alt="avatar" />
</div>
</ng-template>